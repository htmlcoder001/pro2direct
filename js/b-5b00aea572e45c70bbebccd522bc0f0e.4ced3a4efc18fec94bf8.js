(self.webpackChunkvkmvk=self.webpackChunkvkmvk||[]).push([[8772],{53997:function(t){t.exports=function(){"use strict";class t{has(t){return t in this.items}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(this.has(t)){const e=this.items[t];delete this.items[t],this.size--,null!==e.prev&&(e.prev.next=e.next),null!==e.next&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),this.last===e&&(this.last=e.prev)}return this}evict(){const t=this.first;return delete this.items[t.key],this.first=t.next,this.first.prev=null,this.size--,this}get(t){let e;if(this.has(t)){const n=this.items[t];this.ttl>0&&n.expiry<=(new Date).getTime()?this.delete(t):(e=n.value,this.set(t,e,!0))}return e}keys(){return Object.keys(this.items)}set(t,e,n=!1){let r;if(n||this.has(t)){if(r=this.items[t],r.value=e,!1===n&&(r.expiry=this.ttl>0?(new Date).getTime()+this.ttl:this.ttl),this.last!==r){const t=this.last,e=r.next,n=r.prev;this.first===r&&(this.first=r.next),r.next=null,r.prev=this.last,t.next=r,null!==n&&(n.next=e),null!==e&&(e.prev=n)}}else this.max>0&&this.size===this.max&&this.evict(),r=this.items[t]={expiry:this.ttl>0?(new Date).getTime()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:e},1==++this.size?this.first=r:this.last.next=r;return this.last=r,this}constructor(t=0,e=0){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.size=0,this.ttl=e}}return function(e=1e3,n=0){if(isNaN(e)||e<0)throw new TypeError("Invalid max value");if(isNaN(n)||n<0)throw new TypeError("Invalid ttl value");return new t(e,n)}}()},41812:function(t,e,n){"use strict";n.d(e,{browser:function(){return o},isTouch:function(){return s}});n(31982),n(77987),n(14511),n(39009);const r=navigator.userAgent.toLowerCase(),o={version:(r.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/)||[0,"0"])[1],opera:/opera/i.test(r)||/opr/i.test(r),vivaldi:/vivaldi/i.test(r),amigo:/amigo.*mrchrome soc/i.test(r),msie:/msie/i.test(r)&&!/opera/i.test(r)||/trident\//i.test(r)||/edge/i.test(r),msie6:/msie 6/i.test(r)&&!/opera/i.test(r),msie7:/msie 7/i.test(r)&&!/opera/i.test(r),msie8:/msie 8/i.test(r)&&!/opera/i.test(r),msie9:/msie 9/i.test(r)&&!/opera/i.test(r),msie_edge:/edge/i.test(r)&&!/opera/i.test(r),mozilla:/firefox/i.test(r),yabrowser:/yabrowser/i.test(r),whale:/whale/i.test(r),chrome:/chrome/i.test(r)&&!/edge/i.test(r),safari:!/chrome/i.test(r)&&/webkit|safari|khtml/i.test(r),iphone:/iphone/i.test(r),ipod:/ipod/i.test(r),iphone4:/iphone.*OS 4/i.test(r),ipod4:/ipod.*OS 4/i.test(r),ipad:/ipad/i.test(r),ios:/.+(ipod|ipad|iphone.*os)/i.test(r),android:/android/i.test(r),bada:/bada/i.test(r),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(r),msie_mobile:/iemobile/i.test(r),safari_mobile:/iphone|ipod|ipad/i.test(r),opera_mobile:/opera mini|opera mobi/i.test(r),opera_mini:/opera mini/i.test(r),mac:/mac/i.test(r),windows7:/windows nt 6.1/i.test(r),windowsVista:/windows nt 6.0/i.test(r),windowsXp:/windows nt (5.2|5.1)/i.test(r),search_bot:/(yandex|google|stackrambler|aport|slurp|msnbot|bingbot|twitterbot|ia_archiver|facebookexternalhit)/i.test(r),smart_tv:/smart-tv|smarttv/i.test(r)};const s="ontouchstart"in window;"onwheel"in document.createElement("div")||void 0!==document.onmousewheel||o.mozilla,document.createElement("div"),navigator.credentials&&navigator.credentials.preventSilentAccess&&window.vk&&vk.cma},14511:function(t,e,n){"use strict";n.d(e,{fromQueryString:function(){return c},toQueryString:function(){return u}});let r={};const o=t=>"function"==typeof t,s=t=>Array.isArray(t),i=function(t){if(r[t])return t;try{return encodeURIComponent(t)}catch(t){return""}},a=function(t){try{return decodeURIComponent(t)}catch(e){return r[t]=1,t}};function u(t,e){const n=[];for(const e in t)if(t.hasOwnProperty(e)&&null!=t[e]&&!o(t[e]))if(s(t[e]))for(let r=0,s=0,a=t[e].length;r<a;++r)null==t[e][r]||o(t[e][r])||(n.push(i(e)+"["+s+"]="+i(t[e][r])),++s);else n.push(i(e)+"="+i(t[e]));return e||n.sort(),n.join("&")}function c(t){if(!t)return{};const e={};t=t.split("&");for(let n=0;n<t.length;n++){const r=t[n].split("=");if(r[0]){const t=a(r[1]+"");if("[]"===r[0].substr(r.length-2)){const n=a(r[0].substr(0,r.length-2));e[n]||(e[n]=[]),e[n].push(t)}else e[a(r[0])]=t}}return e}},77987:function(t,e,n){"use strict";n.r(e),n.d(e,{getCookie:function(){return a},initCookies:function(){return l},setCookie:function(){return c}});var r=n(34683),o=n(38691),s=n(98584),i=n(41812);function a(t){return function(){window._cookies={};const t=document.cookie.split(";"),e=/^[\s]*([^\s]+?)$/i;for(let n=0,r=t.length;n<r;n++){const r=t[n].split("=");2===r.length&&(_cookies[r[0].match(e)[1]]=unescape(r[1].match(e)?r[1].match(e)[1]:""))}}(),"https:"!==location.protocol&&"localhost"!==location.hostname&&(0,o.statlogsValueEvent)("read_unsecure_cookie",t,location.href),_cookies[t]}function u(t,e){const n=(0,r.getCookieGroups)(),o=function(){const t=a("remixcpl");if(!t)return[];const e=t.split(",");return e.forEach(((t,n)=>{e[n]=parseInt(t)})),e}();let i=t,u=null;if(!(0,r.partConfigEnabled)("need_check_allowed_cookie"))return!0;if(!isNaN(parseInt(e))&&parseInt(e)<0)return!0;"remix"===i.substr(0,5)&&(i=i.substr(5)),n.hasOwnProperty(t)?u=parseInt(n[t]):n.hasOwnProperty(i)?u=parseInt(n[i]):"q_"===i.substr(0,2)&&n.hasOwnProperty("q_")&&(u=parseInt(n.q_)),(null===u||isNaN(u))&&(0,s.logError)(`Undefined cookie group for cookie ${t} (${i})`);return 1===u||!(isNaN(u)||!o.includes(u))}function c(t,e,n,o,s="None",a=window.locDomain,c={}){if(!u(t,n))return!1;const l=t+"="+escape(e),d=c.withoutSubdomains?".":"",f="; path=/"+(a?"; domain="+d+a:""),m="https:"===location.protocol;let p=!!o;(0,r.partConfigEnabled)("cookie_secure_default_true")&&(p=!1!==o);const g=m&&p?"; secure":"",h=p&&i.browser.chrome&&parseInt(i.browser.version)>=71&&(0,r.partConfigEnabled)("cookie_class_samesite")?`; SameSite=${s}`:"";let w="";if(n){const t=new Date;t.setTime(t.getTime()+24*n*60*60*1e3),w="; expires="+t.toGMTString()}return document.cookie=l+w+f+h+g,!0}function l(){window._cookies={}}},31982:function(t,e,n){"use strict";function r(t=window.browser){return!(!t.mac||t.iphone||t.ipad||t.ipod||!(navigator.maxTouchPoints>1))}n.r(e),n.d(e,{isAutoSchemesSupported:function(){return c},isCSSVariablesSupported:function(){return i},isContactPickerApiSupported:function(){return D},isDarkTheme:function(){return o},isES2016supported:function(){return b},isES2017supported:function(){return y},isES2018supported:function(){return E},isES2019supported:function(){return k},isES2020supported:function(){return O},isES2021supported:function(){return R},isES2022supported:function(){return I},isES6supported:function(){return _},isFlexboxSupported:function(){return u},isGridsSupported:function(){return d},isIPadOS:function(){return r},isInstalledRelatedAppsSupported:function(){return C},isIntersectionObserverSupported:function(){return p},isJsModulesSupported:function(){return v},isLightTheme:function(){return s},isMatchMediaSupported:function(){return a},isMutationObserverSupported:function(){return g},isPreloadSupported:function(){return x},isResizeObserverSupported:function(){return h},isSVGSupported:function(){return f},isStickySupported:function(){return w},isSupportsSupported:function(){return l},isWebAssemblySupported:function(){return P},isWebRTCCallsSupported:function(){return S},isWebpSupported:function(){return m}});const o=()=>Boolean(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches),s=()=>Boolean(window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches),i=()=>Boolean(window.CSS&&CSS.supports&&CSS.supports("color","var(--custom-property)")),a=()=>Boolean(window.matchMedia),u=()=>document.documentElement.classList.contains("vk_flex_yes"),c=()=>Boolean(window.matchMedia&&window.matchMedia("(prefers-color-scheme)").matches),l=()=>Boolean(window.CSS&&CSS.supports),d=()=>Boolean("string"==typeof document.createElement("div").style.grid),f=()=>Boolean(document.createElementNS)&&Boolean(document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),m=t=>{const e=new Image;e.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",e.onload=()=>{const n=e.width>0&&e.height>0;t(n)},e.onerror=()=>{t(!1)}},p=()=>"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,g=()=>"MutationObserver"in window,h=()=>"ResizeObserver"in window,w=()=>Boolean(CSS&&CSS.supports&&CSS.supports("position","sticky")),S=()=>{if(window.navigator.userAgent.indexOf("Edge")>-1)return!1;try{return Boolean(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.RTCPeerConnection&&window.RTCIceCandidate&&window.RTCSessionDescription)}catch(t){return!1}};const v=()=>!window.nomodules,_=()=>Boolean(window.Promise),b=()=>Boolean(Array.prototype.includes),y=()=>Boolean(String.prototype.padEnd),E=()=>Boolean(Promise.prototype.finally),k=()=>Boolean(Object.fromEntries),O=()=>Boolean(String.prototype.matchAll);let T=null;function R(){return T||(T=Boolean(String.prototype.replaceAll)&&function(){try{new Function("var v;v||=1")()}catch(t){return!1}return!0}()),T}const I=()=>Boolean(Object.hasOwn),C=()=>Boolean("getInstalledRelatedApps"in navigator);let A=null;const x=()=>{var t,e;null==A&&(A=Boolean(null==(e=document.createElement("link").relList)||null==(t=e.supports)?void 0:t.call(e,"preload")));return A},D=()=>"contacts"in navigator&&"ContactsManager"in window,P=()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const t=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(t instanceof WebAssembly.Module)return new WebAssembly.Instance(t)instanceof WebAssembly.Instance}}catch(t){}return!1}},38691:function(t,e,n){"use strict";n.d(e,{addStatlogListener:function(){return h},statlogsValueEvent:function(){return w}});var r=n(77987),o=n(39009),s=n(25195),i=n(38253),a=n(34683),u=n(90867),c=n(43595);let l,d,f,m;(0,o.isMvk)()?(l="lock_m_stats_cookie_lock",d="remixmstsl",f="lock_m_stats_cookie_locked_stats",m="remixmsts"):(l="lockkk_stats_cookie_lock",m="remixsts",d="remixstsl",f="lock_stats_cookie_locked_stats");const p=[],g={get stats(){return(s.ls.checkVersion()?JSON.parse(s.ls.get(f)):this._stats)||[]},push(t){const e=this.stats;e.push(t),s.ls.checkVersion()?s.ls.set(f,JSON.stringify(e)):this._stats=e},clear(){s.ls.checkVersion()?s.ls.remove(f):delete this._stats}},h=t=>p.push(t);function w(t,e,...n){if(void 0===t||void 0===e)return;if(p.forEach((r=>r(t,e,...n))),(0,a.partConfigEnabled)("local_storage_statlogs_value_event")&&![u.ADBLOCK_CONFIG_KEY,c.WASM_SUPPORT_CONFIG_KEY].includes(t))return void(0,i.saveStatlogEvents)({name:t,value:e,keys:n});const o=[Math.round(Date.now()/1e3),t,e].concat(n);v((()=>{if((0,a.partConfigEnabled)("mvk_stats_cookie_soft_clean_up")){if("1"===(0,r.getCookie)(d))return void g.push(o);(0,r.setCookie)(d,"1")}S(o)}))}function S(t){let e;try{e=JSON.parse((0,r.getCookie)(m)),e=e.data}catch(t){e=[]}if(e=[...e,...g.stats],t&&e.push(t),0===e.length)return;const n=1000000001*Math.random();(0,r.setCookie)(m,JSON.stringify({data:e.slice(-100),uniqueId:n}),.01),g.clear()}function v(t,e){if(s.ls.checkVersion()){if(!0!==s.ls.get(l)){s.ls.set(l,!0);try{t()}catch(t){}return void s.ls.set(l,!1)}e||setTimeout((()=>v(t,!0)),100)}else t()}(0,a.partConfigEnabled)("mvk_stats_cookie_soft_clean_up")&&(window.addEventListener("beforeunload",(()=>{S(null)})),window.ajax&&window.ajax.onResponse((()=>{S(null)})))},34683:function(t,e,n){"use strict";n.r(e),n.d(e,{GROUP_A:function(){return i},GROUP_A1:function(){return h},GROUP_A2:function(){return w},GROUP_B:function(){return a},GROUP_B1:function(){return S},GROUP_B2:function(){return v},GROUP_C:function(){return u},GROUP_C1:function(){return _},GROUP_C2:function(){return b},GROUP_D:function(){return c},GROUP_D1:function(){return y},GROUP_D2:function(){return E},GROUP_E:function(){return l},GROUP_F:function(){return d},GROUP_G:function(){return f},GROUP_H:function(){return m},GROUP_I:function(){return p},GROUP_J:function(){return g},calculateTimeOffsets:function(){return I},getConfigValue:function(){return O},getCookieGroups:function(){return R},getTestGroup:function(){return k},isBelongsToTestGroup:function(){return T},partConfigEnabled:function(){return s},randEnabled:function(){return o}});var r=n(77987);function o(t){return Math.random()<t}function s(t){const{pe:e={}}=window.vk||{};return!!e[t]}const i=1,a=2,u=3,c=4,l=5,d=6,f=7,m=8,p=9,g=10,h=i,w=a,S=u,v=c,_=l,b=d,y=f,E=m;function k(t){const{ex:e={}}=window.vk||{};return e[t]||null}function O(t){const{cfg:e={}}=window.vk||{};return e[t]}function T(t,e,n=1){return new Array(n).fill(0).map(((t,n)=>e+n+1)).includes(t)}function R(){const{acl:t={}}=window.vk||{};return t}function I(){const t=window.vk.ts;if(t&&!window.browser.opera_mobile){const e=new Date;let n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())/1e3-t;n-=10800,n/=60,n=n.toFixed(0),n*=60,n<-55800?n+=86400:n>37800&&(n-=86400);let o=0,s=Math.abs(n);[-12,-11,-10,-9.5,-9,-8,-7,-6,-5,-4.5,-4,-3.5,-3,-2,-1,0,1,2,3,3.5,4,4.5,5,5.5,5.75,6,6.5,7,8,8.75,9,9.5,10,10.5,11,12,12.75,13,14].forEach((t=>{const e=Math.round(3600*(t-3)),r=Math.abs(n-e);r<s&&(s=r,o=e)}));const i=(0,r.getCookie)("remixdt");return void 0!==i&&function(t){if(!0===t)return 1;return parseInt(t)||0}(i)===o||(0,r.setCookie)("remixdt",o,365),o}return 0}},35428:function(t,e,n){"use strict";n.d(e,{isStuckError:function(){return p},pruneRequestFromStuckErrors:function(){return g}});var r,o,s=n(34683),i=n(6089),a=n(78628);const u="mvk"===(null==(o=window.vk)||null==(r=o.statsMeta)?void 0:r.platform)&&(0,s.partConfigEnabled)("mute_mvk_err_peaks"),c=n(53997),l=10,d=u&&c(l),f=u&&c(l,5e3),m=({value:t,stacktrace:e,file:n,page:r})=>[t,e.join(""),n,r].join("_"),p=t=>{if(!u||!f||!d)return!1;const e=m(t);let[n,r]=[d.get(e)||0,f.get(e)||0];return d.set(e,++n),f.set(e,++r),r>=l||n>=50},g=u?t=>{var e;const n=Date.now(),r="jsErrorLogs",o=(0,i.getWebStatsStringValue)(r,t);let s;if(((null==(e=o.match(new RegExp("},{","g")))?void 0:e.length)||0)<l)return t;try{s=JSON.parse(o)}catch(t){(0,a.logProcessingTime)(1,"dedupe-fail")}if(!s)return t;const u=Object.values(s.reduce(((t,e)=>{const n=m(e),r=t[n]||[];return{...t,[n]:r.length<l?r.concat(e):r}}),{})),c=t.replace(`"${r}":${o}`,`"${r}":${JSON.stringify([].concat.apply([],u))}`),d=Date.now()-n;return d>16&&(0,a.logProcessingTime)(d,"dedupe"),c}:t=>t},98584:function(t,e,n){"use strict";n.d(e,{logError:function(){return a},logEvalError:function(){return u}});n(38253),n(35428);var r=n(34683),o=n(39009),s=n(95298);function i(t,{breadcrumb:e,environment:n,hasDummyStacktrace:r}={}){var o;const s=null==(o=("undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).__SENTRY__)?void 0:o.hub;if(s)return r&&t.stack&&delete t.stack,s.captureException(t,{captureContext:t=>(n&&t.setTags({module:n}),e&&t.addBreadcrumb({message:e.message,category:"custom",data:e.data}),t)})}function a(t,e={}){var n;if(null==(n=window)?void 0:n.Raven){const{breadcrumb:n,environment:r}=e;n&&window.Raven.captureBreadcrumb({message:n.message,category:s.customBreadcrumbCategory,data:n.data}),r?window.Raven.captureException(t,{environment:r}):window.Raven.captureException(t)}(0,r.partConfigEnabled)("eager_error_monitoring")?i(t,e):function(t,{breadcrumb:e,environment:n,hasDummyStacktrace:r}={}){var i;const a=(0,o.getGlobalObject)(),u=null==a||null==(i=a.__SENTRY__)?void 0:i.hub;if("function"==typeof(null==u?void 0:u.captureException))r&&"object"==typeof t&&(null==t?void 0:t.stack)&&delete t.stack,u.captureException(t,{captureContext:t=>{var r;const o=n||(null==(r=a.cur)?void 0:r.module);return o&&t.setTags({module:o,[s.PROTECTED_MODULE_NAME_TAG]:!0}),e&&t.addBreadcrumb({message:e.message,category:s.customBreadcrumbCategory,data:e.data}),t}})}(t,e)}function u(t,e){e&&e.length>2e3&&(e=`${e.slice(0,1e3)}...${e.slice(-1e3)}`),t.message+=`: ${e}`,a(t)}},25195:function(t,e,n){"use strict";n.d(e,{ls:function(){return u},multiAccountLs:function(){return d}});var r=n(37449);function o(){try{return void 0!==window.localStorage&&null!==window.localStorage&&void 0!==window.JSON}catch(t){return!1}}function s(t,e){if(void 0===t)return!1;a(t);try{return r.vkLocalStorage.setItem(t,JSON.stringify(e))}catch(t){return!1}}function i(t){if(void 0===t)return!1;try{return JSON.parse(r.vkLocalStorage.getItem(t))}catch(t){return!1}}function a(t){try{r.vkLocalStorage.removeItem(t)}catch(t){}}const u={checkVersion:o,remove:a,get:i,set:s},c=t=>void 0!==t?`${t}_@id:${window.vk.id}`:void 0,l=t=>(...e)=>{const[n,...r]=e,o=[c(n),...r];return t(...o)},d={checkVersion:o,remove:l(a),get:t=>{const e=l(i)(t);if(null===e){const e=i(t);if(null!==e)return d.set(t,e),a(t),e}return e},set:l(s)}},95298:function(t,e,n){"use strict";var r,o;n.d(e,{CustomSentryErrorTypes:function(){return o},Error:function(){return f},PROTECTED_MODULE_NAME_TAG:function(){return a},ReferenceError:function(){return g},SentryExplicitModule:function(){return r},SyntaxError:function(){return p},TypeError:function(){return m},anonymousName:function(){return c},commonIgnoreErrors:function(){return i},customBreadcrumbCategory:function(){return u},extensionPrefixes:function(){return d},moduleDetectionConfig:function(){return s},nativeCode:function(){return l}}),function(t){t.SERVICE_WORKER="service_worker",t.EXTERNAL="external",t.UNKNOWN="unknown"}(r||(r={})),function(t){t.ERROR_OF_EXTENSION="ErrorOfExtension",t.KNOWN_ISSUE="KnownIssue"}(o||(o={}));const s={some:{videoplayer:t=>null==t?void 0:t.some((t=>"dist/videoplayer_v2"===t.module))},includes:{im:"web/imn",messenger:"bundles/fastchat_reforged",audioplayer:"bundles/audioplayer",videoplayer:"dist/videoplayer",stories:"web/stories",notifier:"web/notifier",articles:"web/article",market:"web/market",calls:"web/calls"}},i=[/^AbortError:/],a="__protectedModuleName",u="custom",c="<anonymous>",l="[native code]",d=["chrome","moz","safari","safari-web"].map((t=>`${t}-extension://`)),f="Error",m="TypeError",p="SyntaxError",g="ReferenceError"},39009:function(t,e,n){"use strict";n.d(e,{VK_DOMAIN_REGEX:function(){return d},VK_DOMAIN_REGEX_UNSAFE:function(){return l},VK_HOST_REGEX_GROUP_UNSAFE:function(){return c},VK_HOST_REGEX_UNSAFE:function(){return u},VK_ORIGIN_PREFIX_REGEX:function(){return p},VK_ORIGIN_REGEX:function(){return f},VK_ORIGIN_REGEX_STRICT:function(){return m},VK_POSSIBLE_SITE_HOSTS:function(){return o},VK_SITES_REGEX_SOURCE_UNSAFE:function(){return a},VK_SITE_REGEX_SOURCE_UNSAFE:function(){return i},VK_URL_REGEX:function(){return g},VK_URL_REGEX_STRICT:function(){return h},getAverageRGB:function(){return O},getBlobType:function(){return E},getGlobalObject:function(){return _},getHostName:function(){return v},getMediaBlob:function(){return y},getPhotoFromVideo:function(){return R},getVideoDuration:function(){return b},isMvk:function(){return w},isPWA:function(){return S},loadFontFacePromise:function(){return x},loadImage:function(){return I},loadImages:function(){return C},loadVideo:function(){return T},noop:function(){return k}});const r=t=>t.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"),o=["vk.com","vk.ru",v()].filter(((t,e,n)=>n.indexOf(t)===e)),s=o.concat(["vkontakte.ru","vk.me","userapi.com"]),i=r(v()),a=o.map(r).join("|"),u=new RegExp("("+s.map(r).join("|")+")"),c=new RegExp(s.map(r).join("|")),l=(new RegExp("^"+u.source+"$"),new RegExp(`([a-zA-Z0-9\\.\\_\\-]+\\.)?${u.source}`)),d=new RegExp("^"+l.source+"$"),f=new RegExp(`^(https?:\\/\\/)?${l.source}$`),m=new RegExp(`^(https?:\\/\\/)${l.source}$`),p=new RegExp(`^(https?:\\/\\/)${l.source}`),g=new RegExp(`^(https?:\\/\\/)?${l.source}($|\\/(.*))`),h=new RegExp(`^(https?:\\/\\/)${l.source}($|\\/(.*))`);function w(){return!!window.isMVK}function S(){var t,e,n;return null==(n=window.vk)||null==(e=n.platform)||null==(t=e.startsWith)?void 0:t.call(e,"pwa")}function v(){var t;return(null==(t=_().vk)?void 0:t.__domain)||"vk.com"}function _(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}}function b(t=""){return new Promise(((e,n)=>{const r=document.createElement("video");r.addEventListener("loadedmetadata",(()=>e(r.duration)),{once:!0}),r.addEventListener("error",n,{once:!0}),r.crossOrigin="anonymous",r.preload="metadata",r.src=t}))}function y(t){return new Promise(((e,n)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="blob",r.onload=()=>{if(404===r.response.status)return n();e(r.response)},r.onerror=n,r.send()}))}function E(t){try{return t.type.split("/").splice(-1)[0]}catch(t){return null}}const k=()=>{};function O(t,e=0,n=0,r,o){const s={r:0,g:0,b:0};let i;r=r||t.canvas.width,o=o||t.canvas.height;try{i=t.getImageData(e,n,r,o)}catch(t){return s}let a=-4,u=0;for(;(a+=20)<i.data.length;)++u,s.r+=i.data[a],s.g+=i.data[a+1],s.b+=i.data[a+2];return s.r=~~(s.r/u),s.g=~~(s.g/u),s.b=~~(s.b/u),s}function T(t){return new Promise(((e,n)=>{const r=document.createElement("video");r.muted=!0,r.autoplay=!0,r.addEventListener("canplay",(()=>{r.pause(),e(r)}),{once:!0}),r.addEventListener("error",n,{once:!0}),r.crossOrigin="anonymous",r.src=t}))}function R(t,e=[0]){const n=[];return new Promise(((r,o)=>{const s=document.createElement("canvas"),i=s.getContext("2d"),{videoWidth:a,videoHeight:u}=t;s.width=a,s.height=u,function c(l){const d=t.currentTime;t.addEventListener("seeked",(()=>{null==i||i.drawImage(t,0,0,a,u,0,0,a,u),t.currentTime=d,I(s.toDataURL("image/jpeg",1)).then((o=>{n.push(o),l>=e.length-1?(t.src="",r(n)):c(l+1)})).catch(o)}),{once:!0}),t.currentTime=-1===e[l]?t.duration:e[l]}(0)}))}function I(t){return new Promise(((e,n)=>{const r=new Image;r.crossOrigin=t.startsWith("data:")?null:"Anonymous",r.onerror=()=>n(new Error(`Failed to load image's URL: ${t}`)),r.onload=()=>e(r),r.src=t}))}const C=t=>new Promise((e=>{const n=t.map((t=>I(t)));Promise.all(n).then((t=>e(t))).catch((()=>{}))}));function A(t,e){const n={normal:"400",500:"500",600:"600",bold:"700"},r={tolerance:2,delay:100,glyphs:"",success:function(){},error:function(){},timeout:5e3,weight:"400",style:"normal"},o={display:"block","font-size":"48px","line-height":"normal","font-variant":"normal","white-space":"nowrap",position:"absolute",visibility:"hidden",top:"-9999px",left:"-9999px",width:"auto",height:"auto",margin:"0",padding:"0"};let s,i,a,u,c,l,d;function f(t){let e=[];return each(t,(function(t,n){e.push(t+":"+n)})),e.join(";")}function m(t,e,n){return Math.abs(t.width-e.offsetWidth)>n||Math.abs(t.height-e.offsetHeight)>n}function p(){u||(utilsNode.appendChild(c),u=!0,a={sansSerif:{width:d.offsetWidth,height:d.offsetHeight},serif:{width:l.offsetWidth,height:l.offsetHeight}},d.style.fontFamily=`"${t}", sans-serif`,l.style.fontFamily=`"${t}", serif`),u&&a&&(m(a.sansSerif,d,e.tolerance)||m(a.serif,l,e.tolerance))?(c&&c.remove(),e.success()):(new Date).getTime()-i.getTime()>e.timeout?(c&&c.remove(),e.error()):!u&&"requestAnimationFrame"in window?window.requestAnimationFrame(p):window.setTimeout(p,e.delay)}for(let t in r)e.hasOwnProperty(t)||(e[t]=r[t]);o["font-weight"]=e.weight,o["font-style"]=e.style,!e.glyphs&&"fonts"in document?(e.timeout&&(s=setTimeout((function(){e.error()}),e.timeout)),function(r){var o;each(null==(o=document)?void 0:o.fonts,(function(o){o.family.toLowerCase()===t.toLowerCase()&&(n[o.weight]||o.weight)===""+e.weight&&o.style===e.style&&o.load().then((function(){e.success(),clearTimeout(r)}))}))}(s)):function(){const t="AxmTYklsjo190QW"+e.glyphs;i=new Date,c=document.createElement("div"),d=document.createElement("div"),d.innerHTML=t,l=document.createElement("div"),l.innerHTML=t,d.setAttribute("style",f(extend({"font-family":"sans-serif"},o))),l.setAttribute("style",f(extend({"font-family":"serif"},o))),c.appendChild(d),c.appendChild(l),p()}()}function x(t,e){return new Promise(((n,r)=>{A(t,{...e,glyphs:"",success(){const t=()=>{n(),(null==e?void 0:e.success)&&e.success()};browser.safari?setTimeout(t,150):t()},error(){r(),(null==e?void 0:e.error)&&e.error()}})}))}},37449:function(t,e,n){"use strict";n.d(e,{bestAvailableStorage:function(){return h},getSessionStorage:function(){return f},isStorageAvailable:function(){return a},vkLocalStorage:function(){return l},vkSessionStorage:function(){return m}});class r{setItem(t,e){this.data[t]=String(e)}removeItem(t){delete this.data[t]}clear(){this.data={}}get length(){return Object.keys(this.data).length}key(t){return Object.keys(this.data)[t]}constructor(){this.data={},this.getItem=t=>this.data.hasOwnProperty(t)?this.data[t]:null,this.keys=()=>Object.keys(this.data)}}const o="vk-ls-dummy",s=Math.random().toString(),i={localStorage:null,sessionStorage:null};function a(t){if(null===i[t])try{const e=window[t];e.setItem(o,s),i[t]=s===e.getItem(o),e.removeItem(o)}catch(e){i[t]=!1}return i[t]}let u;function c(){return u||(u=a("localStorage")?window.localStorage:new r,u)}const l={setItem:(t,e)=>c().setItem(t,e),getItem:t=>c().getItem(t),removeItem:t=>c().removeItem(t),clear:()=>c().clear(),length:()=>c().length,key:t=>c().key(t),keys(){const t=c();return t instanceof r?t.keys():Object.keys(t)},getPrefixedKeys:t=>l.keys().filter((e=>e.startsWith(t)))};let d;function f(){return d||(d=a("sessionStorage")?window.sessionStorage:new r,d)}const m={setItem:(t,e)=>f().setItem(t,e),getItem:t=>f().getItem(t),removeItem:t=>f().removeItem(t),clear:()=>f().clear(),length:()=>f().length,key:t=>f().key(t),keys(){const t=f();return t instanceof r?t.keys():Object.keys(t)},getPrefixedKeys:t=>m.keys().filter((e=>e.startsWith(t)))};let p;function g(){return p||(p=a("localStorage")?window.localStorage:a("sessionStorage")?window.sessionStorage:new r,p)}const h={setItem:(t,e)=>g().setItem(t,e),getItem:t=>g().getItem(t),removeItem:t=>g().removeItem(t),clear:()=>g().clear(),length:()=>g().length,key:t=>g().key(t),keys(){const t=g();return t instanceof r?t.keys():Object.keys(t)},getPrefixedKeys:t=>h.keys().filter((e=>e.startsWith(t)))}},38253:function(t,e,n){"use strict";n.d(e,{saveCustomStats:function(){return r.saveCustomStats},saveJsErrorLogs:function(){return r.saveJsErrorLogs},saveNetworkStats:function(){return r.saveNetworkStats},saveProductionStats:function(){return r.saveProductionStats},saveStatlogEvents:function(){return r.saveStatlogEvents},writeAndSendWebStats:function(){return r.writeAndSendWebStats}});var r=n(40889)},78628:function(t,e,n){"use strict";n.d(e,{MAX_BODY_SIZE:function(){return a},appendStatsMeta:function(){return l},canSendBeacon:function(){return m},concatJSONS:function(){return c},logProcessingTime:function(){return g},makeWebStatsRequest:function(){return p},sendBeacon:function(){return f}});var r=n(38691),o=n(35428),s=n(39009),i=n(34683);const a=1.8*Math.pow(10,6),u=t=>t.startsWith("{")&&t.endsWith("}"),c=(t,e)=>[t,e].every(u)?`${t.slice(0,-1)},${e.substring(1)}`:"{}",l=(t,e)=>{const{id:n,statsMeta:{st:r,platform:o,...s}}=window.vk,{item_id:i,item_owner_id:a,item_type:l}=window.cur;return c(JSON.stringify({id:n,st:r,platform:o,attempt:t,signTime:s.time,sign:s.hash,...i&&{item_id:i},...l&&{item_type:l},...a&&{item_owner_id:a}}),u(e)?e:"{}")};function d(t,e){return new Promise(((n,r)=>{const o=new XMLHttpRequest;o.open("POST",t),t.includes(`tau.${(0,s.getHostName)()}`)&&(o.withCredentials=!0),o.onload=function(){return this.status>=200&&this.status<300?n(o.response):r({status:this.status,statusText:o.statusText})},o.onerror=function(){return r({status:this.status,statusText:o.statusText})},o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(e)}))}function f(t,e){try{if(!navigator.sendBeacon(t,e))return Promise.reject(new Error("Beacon not sent"))}catch(t){return Promise.reject(new Error("Beacon fail"))}return Promise.resolve()}function m(){return"sendBeacon"in navigator&&!window.vk.wsTransport.includes(`tau.${(0,s.getHostName)()}`)}const p=(t,e)=>(t=t||`${window.vk.wsTransport}/web-stats/${window.vk.statsMeta.st?"s":"p"}`,e=(0,o.pruneRequestFromStuckErrors)("string"==typeof e?e:JSON.stringify(e)),(0,i.partConfigEnabled)("web_stats_send_beacon")&&m()&&"sendBeacon"in navigator?f(t,e).catch((()=>d(t,e))):d(t,e));function g(t,e,n){(0,r.statlogsValueEvent)("web_stats_batching_time",t,window.vk.statsMeta.platform,e,n)}},40889:function(t,e,n){"use strict";n.d(e,{pullFromWebStats:function(){return k},saveBenchmarkMainStats:function(){return L},saveCustomStats:function(){return A},saveJsErrorLogs:function(){return T},saveNetworkStats:function(){return C},saveProductionStats:function(){return I},saveStatlogEvents:function(){return R},saveStoryViewBaseStats:function(){return x},saveStoryViewStats:function(){return D},saveWebPerfStats:function(){return P},writeAndSendWebStats:function(){return O}});var r=n(6089),o=n(84555),s=n(34683),i=n(78628),a=n(39009),u=n(35428),c=n(77987);const l=t=>{const e=Date.now(),n=t=>`{${null==t?void 0:t.map((([t,e])=>`"${t}":${e}`)).join(",")}}`,[o,s]=Object.keys((0,r.getEmptyStatsData)()).reduce(((e,n)=>{const o=(0,r.getWebStatsStringValue)(n,t);return"[]"===o?e:[...e,[n,o]]}),[]).sort((([,t],[,e])=>e.length-t.length)).reduce((([t,e],[r,o])=>{const s=[[r,o]];return o.length+n(t).length<i.MAX_BODY_SIZE?[t.concat(s),e]:[t,e.concat(s)]}),[[],[]]),a=n(o);if((0,i.logProcessingTime)(Date.now()-e,"chunk"),Date.now()-e<500&&s[0]&&a.length<.1*i.MAX_BODY_SIZE){const t=Date.now();try{const e=((t,e)=>{const[n,r]=e,o=`{"${n}":[${JSON.parse(r).reduce(((e,n,r)=>e.length<i.MAX_BODY_SIZE-t.length?`${e}${0===r?"":","}${JSON.stringify(n)}`:e),"")}]}`;return"{}"===t?o:(0,i.concatJSONS)(t,o)||t})(a,s.reverse()[0]);return(0,i.logProcessingTime)(Date.now()-t,"batch"),e}catch(e){return(0,i.logProcessingTime)(Date.now()-t,"batch-fail"),""}}return a};function d(){var t;if(!(0,s.partConfigEnabled)("web_stats_reduce_debounce"))return!1;const e=(null==(t=window.vk)?void 0:t.started)||Date.now();return Date.now()-e<=3e4}const f=()=>d()?1e3:1e4,m=()=>d()?5e3:2e4;let p,g=0;const h=()=>f()*g**.5,w=()=>!(Date.now()-(0,r.getLastSendTime)()>m()+h()),S=()=>Math.max(0,(0,r.getLastSendTime)()+(d()?2e3:2e4)-Date.now()),v=()=>{window.__isSendingWebStats||p||(p=window.setTimeout((()=>{const t=(0,r.getWebStatDataLs)();p=void 0,t.length>r.emptyStatsDataLs.length&&y(t)}),Math.max(Math.min(S(),f()),Math.max(0,(0,r.getLastSendTime)()+m()-Date.now()+h()))))},_=t=>{let e="";if((0,s.partConfigEnabled)("web_stats_device_id")){const t=new URLSearchParams,n=(0,c.getCookie)("remixgp");n&&t.set("device_id",n),e=t.toString()}const n=`${window.vk.wsTransport}/web-stats/${window.vk.statsMeta.st?"s":"p"}${e&&`?${e}`}`,o=t.length>i.MAX_BODY_SIZE;let d=o?l(t):t,f=!1;if(!d)return window.__isSendingWebStats=!1,(0,r.clearLsData)();function m(e){const n=Date.now();window.__isSendingWebStats=!1,e<500&&(o&&200===e?Object.keys((0,r.getEmptyStatsData)()).forEach((t=>k(t,d))):(0,r.clearLsData)(),g=0,f=!0),(o||400===e)&&(0,i.logProcessingTime)(Date.now()-n,`${o?"prune":"clean"}${400===e?"-fail":""}`,`${t.length>>>20}M ${d.length>>>20}M`),v()}function p(){const t=new XMLHttpRequest;t.withCredentials=n.includes(`tau.${(0,a.getHostName)()}`),t.onreadystatechange=()=>{t.readyState===XMLHttpRequest.DONE&&m(t.status)},t.onerror=()=>{window.__isSendingWebStats=!1,!f&&(0,r.clearLsData)()},t.open("POST",n,!0),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(d)}d=(0,u.pruneRequestFromStuckErrors)((0,i.appendStatsMeta)(++g,d)),(0,i.canSendBeacon)()?(0,i.sendBeacon)(n,d).then((()=>m(200))).catch((()=>p())):p()},b=(t,e)=>{const n=e=>setTimeout((()=>t()),e);return(null==e?void 0:e.force)?n(0):window.requestIdleCallback?window.requestIdleCallback((()=>n(f())),{timeout:f()/2}):n(f())};function y(t,e){const n=t.length>=i.MAX_BODY_SIZE,s=(null==e?void 0:e.force)||n;if(t.length<=r.emptyStatsDataLs.length)(0,o.logWebStatsEvent)("WebStats empty data.","");else{if(!window.__isSendingWebStats)return s||p||!w()?(window.__isSendingWebStats=!0,b((()=>{const t=(0,r.getWebStatDataLs)();if(t.length>r.emptyStatsDataLs.length&&(s||!w()))return(0,r.setLastSendTime)(),_(t);clearTimeout(p),window.__isSendingWebStats=!1,p=void 0}),{...e,force:s})):((0,o.logWebStatsEvent)("WebStats delayed.",p),v());(0,o.logWebStatsEvent)("WebStats sending.",window.__isSendingWebStats)}}var E=n(37449);const k=(t,e)=>{const n=(0,r.getWebStatsStringValue)(t,e);if("[]"!==n){const t=(0,r.getWebStatDataLs)().replace(n.slice(1,-1),"").replace(/\[\,/,"[");(0,r.writeLocked)((()=>E.vkLocalStorage.setItem(r.lsDataKey,t)))}},O=(t,e,n,s)=>{const i=((t,e)=>{const n=(0,r.getWebStatsStringValue)(t);return(0,r.getWebStatDataLs)().replace(`"${t}":${n}`,`"${t}":${n.replace(/]$/,`${"[]"===n?"":","}${JSON.stringify(e)}]`)}`)})(e,n);(0,r.writeLocked)((()=>{E.vkLocalStorage.setItem(r.lsDataKey,i),y(i,s)})),(0,o.logWebStatsEvent)(t,n)},T=t=>O("saveJsErrorLogs","jsErrorLogs",t),R=({name:t,value:e,keys:n=[]})=>{const r=[Math.round(Number(Date.now())/1e3),t,e,...n];return(0,s.partConfigEnabled)("web_stats_transport_debugger")&&console.log("Data was transformed!"),O("saveStatlogEvents","statlogEvents",r)},I=(t,e)=>O("saveProductionStats","productionStats",t,e),C=t=>O("saveNetworkStats","networkStats",t),A=t=>O("saveCustomStats","customStats",t),x=t=>O("saveStoryViewStats","storyViewStats",t),D=t=>x(t),P=t=>O("saveWebPerfStats","webPerfStats",t),L=t=>O("saveBenchmarkMainStats","benchmarkMainStats",t)},84555:function(t,e,n){"use strict";n.d(e,{logWebStatsEvent:function(){return o}});var r=n(34683);function o(t,e){(0,r.partConfigEnabled)("web_stats_transport_debugger")&&console.log(`[new transport debug] ${t}`,e)}},6089:function(t,e,n){"use strict";n.d(e,{clearLsData:function(){return p},emptyStatsDataLs:function(){return l},getEmptyStatsData:function(){return c},getLastSendTime:function(){return h},getWebStatDataLs:function(){return f},getWebStatsStringValue:function(){return m},lsDataKey:function(){return i},setLastSendTime:function(){return g},writeLocked:function(){return d}});var r=n(37449),o=n(84555);const s=(0,n(39009).isMvk)()?"mvk":"web",i=`XHR_STATS_TRANSPORT_DATA_${s}`,a=`XHR_STATS_TRANSPORT_META_${s}`,u=`XHR_STATS_TRANSPORT_DATA_LOCK_${s}`,c=()=>({jsErrorLogs:[],statlogEvents:[],productionStats:[],storyViewStats:[],networkStats:[],customStats:[],webPerfStats:[],benchmarkMainStats:[]}),l=JSON.stringify(c());function d(t){if("locked"!==r.vkSessionStorage.getItem(u)){(0,o.logWebStatsEvent)("writeLocked","lock"),r.vkSessionStorage.setItem(u,"locked");try{t()}catch(t){}return(0,o.logWebStatsEvent)("writeLocked","free"),void r.vkSessionStorage.setItem(u,"free")}setTimeout((()=>d(t)),100)}const f=()=>r.vkLocalStorage.getItem(i)||l,m=(t,e=f())=>{var n;const r=Object.keys(c()).filter((e=>e!==t)).join("|"),o=(null==e||null==(n=e.match(new RegExp(`"${t}":(\\[.*?\\])(?:,"(${r})":\\[|}$)`)))?void 0:n[1])||"";return(s=o).startsWith("[")&&s.endsWith("]")?o:"[]";var s};function p(t){t&&(0,o.logWebStatsEvent)("WebStats cleared. "+(t?"Reason: LS is broken.":""),t),d((()=>r.vkLocalStorage.setItem(i,"")))}function g(t=Number(new Date)){r.vkSessionStorage.setItem(a,t.toString())}function h(){return parseInt(`${r.vkSessionStorage.getItem(a)||0}`)}},90867:function(t,e,n){"use strict";n.d(e,{ADBLOCK_CONFIG_KEY:function(){return o},DEFAULT_ADBLOCK_STATS_COOLDOWN_MS:function(){return r},URLS:function(){return s}});const r=864e5,o="unique_adblock_users",s=["https://tns-counter.ru","https://top-fwz1.mail.ru"]},43595:function(t,e,n){"use strict";n.d(e,{DEFAULT_WASM_SUPPORT_COOLDOWN_MS:function(){return r},WASM_SUPPORT_CONFIG_KEY:function(){return o}});const r=864e5,o="users_wasm_support"}}]);